
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Advanced &#8212; bitcash 0.6.6 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Frequently Asked Questions" href="../community/faq.html" />
    <link rel="prev" title="Fees" href="fees.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
<div class="documentwrapper">
  <div class="bodywrapper">
    <div class="body" role="main">
    
  <section id="advanced">
<span id="id1"></span><h1>Advanced<a class="headerlink" href="#advanced" title="Permalink to this heading">¶</a></h1>
<section id="server-integration">
<h2>Server Integration<a class="headerlink" href="#server-integration" title="Permalink to this heading">¶</a></h2>
<p>If you only want to use bitcash for its raw speed to lessen the load on your
servers, you don’t have to use any of our network capabilities.</p>
<ul class="simple">
<li><p>Use <a class="reference internal" href="../dev/api.html#bitcash.PrivateKey.create_transaction" title="bitcash.PrivateKey.create_transaction"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_transaction()</span></code></a> instead of
<a class="reference internal" href="../dev/api.html#bitcash.PrivateKey.send" title="bitcash.PrivateKey.send"><code class="xref py py-func docutils literal notranslate"><span class="pre">send()</span></code></a></p></li>
<li><p>Supply <a class="reference internal" href="transactions.html#unspentparam"><span class="std std-ref">your own UTXOs</span></a></p></li>
<li><p>Set <a class="reference internal" href="transactions.html#feeparam"><span class="std std-ref">your own fee</span></a></p></li>
<li><p>Make sure all <a class="reference internal" href="transactions.html#outputsparam"><span class="std std-ref">Outputs</span></a> only use these currencies: satoshi, ubch,
mbch, or bch.</p></li>
</ul>
</section>
<section id="offline-transactions">
<span id="coldstorage"></span><h2>Offline Transactions<a class="headerlink" href="#offline-transactions" title="Permalink to this heading">¶</a></h2>
<p>bitcash supports the signing of transactions for keys in cold storage. First you
need to prepare a transaction while connected to the internet using the
<a class="reference internal" href="../dev/api.html#bitcash.PrivateKey.prepare_transaction" title="bitcash.PrivateKey.prepare_transaction"><code class="xref py py-func docutils literal notranslate"><span class="pre">prepare_transaction()</span></code></a> class method of a private key.
You must know your address.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bitcash</span> <span class="kn">import</span> <span class="n">PrivateKeyTestnet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bitcash.network</span> <span class="kn">import</span> <span class="n">NetworkAPI</span><span class="p">,</span> <span class="n">satoshi_to_currency</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">satoshi_to_currency</span><span class="p">(</span><span class="n">NetworkAPI</span><span class="o">.</span><span class="n">get_balance_testnet</span><span class="p">(</span><span class="n">address</span><span class="p">),</span> <span class="s1">&#39;usd&#39;</span><span class="p">)</span>
<span class="go">&#39;833.03&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_data</span> <span class="o">=</span> <span class="n">PrivateKeyTestnet</span><span class="o">.</span><span class="n">prepare_transaction</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;n2eMqTT929pb1RDNuqEnxdaLau1rxy3efi&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;jpy&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_data</span>
<span class="go">&#39;{&quot;unspents&quot;:[{&quot;amount&quot;:80775726,&quot;confirmations&quot;:1,&quot;script&quot;:&quot;76a914990ef60d63b5b5964a1c2282061af45123e93fcb88ac&quot;,&quot;txid&quot;:&quot;c47061643341aca8665ca7e447aff8c57bc0fd61a3ef731f44642b1d9fa46d5a&quot;,&quot;txindex&quot;:1}],&quot;outputs&quot;:[[&quot;n2eMqTT929pb1RDNuqEnxdaLau1rxy3efi&quot;,861],[&quot;muUFbvTKDEokGTVUjScMhw1QF2rtv5hxCz&quot;,80720625]]}&#39;</span>
</pre></div>
</div>
<p>This performs validation and returns a JSON string containing all the required
information to create a transaction. You should then take this to your offline
machine and use the <a class="reference internal" href="../dev/api.html#bitcash.PrivateKey.sign_transaction" title="bitcash.PrivateKey.sign_transaction"><code class="xref py py-func docutils literal notranslate"><span class="pre">sign_transaction()</span></code></a> method of your
private key.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hex</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">tx_data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hex</span>
<span class="go">&#39;01000000015a6da49f1d2b64441f73efa361fdc07bc5f8af47e4a75c66a8ac4133646170c4010000006a4730440220266c56a2592fbd6948f3e5d17720ad2dad57ce23a5cc0d2d4fd2315cbe5a798802203372b9b0d10e920462f9553392333e84cd8fa1d92953d0b4598888370dc187140121033d5c2875c9bd116875a71a5db64cffcb13396b163d039b1d9327824891804334ffffffff025d030000000000001976a914e7c1345fc8f87c68170b3aa798a956c2fe6a9eff88acf1b2cf04000000001976a914990ef60d63b5b5964a1c2282061af45123e93fcb88ac00000000&#39;</span>
</pre></div>
</div>
<p>Finally, bring this transaction back to your connected device and broadcast it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bitcash.network</span> <span class="kn">import</span> <span class="n">NetworkAPI</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NetworkAPI</span><span class="o">.</span><span class="n">broadcast_tx_testnet</span><span class="p">(</span><span class="n">tx_hex</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="blockchain-storage-op-return">
<h2>Blockchain Storage (OP_RETURN)<a class="headerlink" href="#blockchain-storage-op-return" title="Permalink to this heading">¶</a></h2>
<p>bitcash allows you to easily <a class="reference external" href="https://en.bitcoin.it/wiki/OP_RETURN">store messages or data</a> in the blockchain itself
using the <code class="docutils literal notranslate"><span class="pre">message</span></code> parameter of <a class="reference internal" href="../dev/api.html#bitcash.PrivateKey.create_transaction" title="bitcash.PrivateKey.create_transaction"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_transaction()</span></code></a>
or <a class="reference internal" href="../dev/api.html#bitcash.PrivateKey.send" title="bitcash.PrivateKey.send"><code class="xref py py-func docutils literal notranslate"><span class="pre">send()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Simplicity level is over 9000!!!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Messages will be encoded as UTF-8 when stored. Also, do note that the length
of each datum must not exceed 40 bytes. Therefore, your resulting byte string
will be stored in chunks to adhere to this property if it is too long.</p>
</section>
<section id="services-timeout">
<h2>Services Timeout<a class="headerlink" href="#services-timeout" title="Permalink to this heading">¶</a></h2>
<p>If you want to change the default timeout of 5 seconds for service API calls:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bitcash</span> <span class="kn">import</span> <span class="n">set_service_timeout</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_service_timeout</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="cache-times">
<span id="id2"></span><h2>Cache Times<a class="headerlink" href="#cache-times" title="Permalink to this heading">¶</a></h2>
<p>If you want to change the default cache time of exchange rates (60 seconds)
or recommended fees (10 minutes):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bitcash</span> <span class="kn">import</span> <span class="n">set_fee_cache_time</span><span class="p">,</span> <span class="n">set_rate_cache_time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_rate_cache_time</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_fee_cache_time</span><span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


    <br>
    <ul>
      <li>
        Previous topic: <a href="fees.html">Fees</a>
      </li>
      <li>
        Next topic: <a href="../community/faq.html">Frequently Asked Questions</a>
      </li>
    </ul>
    </div>
  </div>
</div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!-- From https://github.com/kennethreitz/requests/blob/master/docs/_templates/sidebarlogo.html -->

<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/bitcash.png"/>
  </a>
</p>

<p>
  <iframe src="https://ghbtns.com/github-btn.html?user=pybitcash&repo=bitcash&type=watch&count=true&size=large"
    allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>

<p>
  bitcash is a modern Bitcoin Cash library designed to be a pleasure to use for developers and end users alike.
</p>

<h3>Stay Informed</h3>
<p>Receive updates on new releases and upcoming projects.</p>

<p><iframe src="https://ghbtns.com/github-btn.html?user=pybitcash&type=follow&count=false"
  allowtransparency="true" frameborder="0" scrolling="0" width="200" height="20"></iframe></p>

<p><a href="https://twitter.com/merc1er" class="twitter-follow-button" data-show-count="false">Follow @merc1er</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>


<h3>Other Projects</h3>

<p>More <a href="https://bitcoincash.org/developers.html">Bitcoin Cash</a> projects</p>
<ul>
  <!-- <li><a href="#"></a></li> -->
</ul>


<h3>Useful Links</h3>
<ul>
  <li><a href="https://github.com/pybitcash/bitcash">bitcash @ GitHub</a></li>
  <li><a href="https://pypi.org/project/bitcash">bitcash @ PyPI</a></li>
  <li><a href="https://github.com/pybitcash/bitcash/issues">Issue Tracker</a></li>
</ul>

<h3>Dependencies</h3>
<ul>
  <li><a href="https://github.com/ofek/coincurve">Coincurve</a></li>
  <li><a href="https://github.com/kennethreitz/requests">Requests</a></li>
  <li><a href="#">CashAddress</a></li>
</ul>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Advanced</a><ul>
<li><a class="reference internal" href="#server-integration">Server Integration</a></li>
<li><a class="reference internal" href="#offline-transactions">Offline Transactions</a></li>
<li><a class="reference internal" href="#blockchain-storage-op-return">Blockchain Storage (OP_RETURN)</a></li>
<li><a class="reference internal" href="#services-timeout">Services Timeout</a></li>
<li><a class="reference internal" href="#cache-times">Cache Times</a></li>
</ul>
</li>
</ul>

  </div><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="fees.html" title="previous chapter">Fees</a></li>
      <li>Next: <a href="../community/faq.html" title="next chapter">Frequently Asked Questions</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/guide/advanced.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- From https://github.com/kennethreitz/requests/blob/master/docs/_templates/hacks.html -->

<!-- Alabaster (krTheme++) Hacks -->

<!-- CSS Adjustments (I'm very picky.) -->
<style type="text/css">

  /* Rezzy requires precise alignment. */
  img.logo {margin-left: -20px!important;}

  /* "Quick Search" should be capitalized. */
  div#searchbox h3 {text-transform: capitalize;}

  /* Make the document a little wider, less code is cut-off. */
  div.document {width: 1008px;}

  /* Much-improved spacing around code blocks. */
  div.highlight pre {padding: 11px 14px;}

  /* Remain Responsive! */
  @media screen and (max-width: 1008px) {
    div.sphinxsidebar {display: none;}
    div.document {width: 100%!important;}

    /* Have code blocks escape the document right-margin. */
    div.highlight pre {margin-right: -30px;}
  }

</style>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, BitCash.
      
      |
      <a href="../_sources/guide/advanced.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/pybitcash/bitcash" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>